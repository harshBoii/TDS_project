import type { ApiProvider } from '../types/providers';
import type { TokenUsage } from '../types/shared';
/**
 * A utility class for tracking token usage across an evaluation
 */
export declare class TokenUsageTracker {
    private static instance;
    private providersMap;
    private constructor();
    /**
     * Get the singleton instance of TokenUsageTracker
     */
    static getInstance(): TokenUsageTracker;
    /**
     * Track token usage for a provider
     * @param provider The provider to track usage for
     * @param usage The token usage to track
     */
    trackUsage(providerId: string, usage?: TokenUsage): void;
    /**
     * Get the cumulative token usage for a specific provider
     * @param providerId The ID of the provider to get usage for
     * @returns The token usage for the provider
     */
    getProviderUsage(providerId: string): TokenUsage | undefined;
    /**
     * Get all provider IDs that have token usage tracked
     * @returns Array of provider IDs
     */
    getProviderIds(): string[];
    /**
     * Get aggregated token usage across all providers
     * @returns Aggregated token usage
     */
    getTotalUsage(): TokenUsage;
    /**
     * Reset token usage for a specific provider
     * @param providerId The ID of the provider to reset
     */
    resetProviderUsage(providerId: string): void;
    /**
     * Reset token usage for all providers
     */
    resetAllUsage(): void;
    /**
     * Cleanup method to prevent memory leaks
     */
    cleanup(): void;
    /**
     * Merge token usage records
     * @param current The current token usage
     * @param update The new token usage to merge
     * @returns The merged token usage
     */
    private mergeUsage;
}
/**
 * Decorator function to wrap a provider's callApi method to track token usage
 * @param provider The provider to instrument
 * @returns The instrumented provider
 */
export declare function withTokenTracking<T extends ApiProvider>(provider: T): T;
/**
 * Get the cumulative token usage from a provider
 * @param provider The provider to get token usage from
 * @returns The cumulative token usage
 */
export declare function getCumulativeTokenUsage(provider: ApiProvider): TokenUsage | undefined;
/**
 * Reset the cumulative token usage for a provider
 * @param provider The provider to reset token usage for
 */
export declare function resetCumulativeTokenUsage(provider: ApiProvider): void;
/**
 * Get the total token usage across all providers
 * @returns The total token usage
 */
export declare function getTotalTokenUsage(): TokenUsage;
/**
 * Reset token usage for all providers
 */
export declare function resetAllProviderTokenUsage(): void;
//# sourceMappingURL=tokenUsage.d.ts.map